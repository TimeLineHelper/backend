<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="https://fonts.googleapis.com/css?family=Caveat|Dosis|Neucha|Open+Sans+Condensed:300|Shadows+Into+Light+Two|Sunflower:300"
    rel="stylesheet">
  <title>Time Line Helper App</title>
</head>

<body>
  <!-- Nav Bar -->
  <div class="header">
    <h1 id="app-title">Track It</h1>
  </div>
  <input type="checkbox" class="openSidebarMenu" id="openSidebarMenu">
  <label for="openSidebarMenu" class="sidebarIconToggle">
    <div class="spinner diagonal part-1"></div>
    <div class="spinner horizontal"></div>
    <div class="spinner diagonal part-2"></div>
  </label>
  <div id="sidebarMenu">
    <ul class="sidebarMenuInner">
      <li>
        <a href="/Home" target="_blank">Home</a>
      </li>
      <li>
          <a href="" target="_blank">Login</a>
        </li>
      <li>
        <a href="" target="_blank">Logout</a>
      </li>
    </ul>
  </div>

  <div id="root"></div>
  <script src="./src/app.js"></script>

  <!-- Google OAuth Login -->
  <div id="googleAuth">
    <script>
      let a = document.createElement('a');
      let AUTH_URL = 'https://accounts.google.com/o/oauth2/v2/auth';
      let clientIDQuery = 'client_id=1085617298907-hi1l3l8nsm5pq415j27cbsk2rlp9c6nj.apps.googleusercontent.com';
      let responseTypeQuery = 'response_type=code';
      let scopeQuery = 'scope=openid%20profile%20email';
      let promptQuery = 'prompt=consent';
      let redirectURIQuery = 'redirect_uri=http://localhost:3000/callback';
      let formattedURL =
        `${AUTH_URL}?${clientIDQuery}&${responseTypeQuery}&${scopeQuery}&${promptQuery}&${redirectURIQuery}`;

      a.setAttribute('href', formattedURL);
      a.textContent = 'Login';
      console.log('the URL we built:', formattedURL);
      document.body.append(a);

      if (!document.cookie) {
        a.textContent = 'You are not logged in';
      } else {
        let cookies = document.cookie.split('; ');
        if (cookies[0] && cookies[1]) {
          let userInfo = cookies[1].split('=')[1];
          let userName = userInfo.split('%20')[0];
          a.textContent = `Welcome, ${userName}!`;
        }
      }
    </script>
  </div>
</body>

</html>